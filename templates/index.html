<!DOCTYPE html>
<html>
 <head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Grid</title>

   <style>
     body {
       display: flex;
       margin: 0;
       font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
     }
     .search-container {
       width: 100%;
       height: 30px;
       background-color: #2c3e50;
       color: white;
       padding: 10px;
       text-align: center;
       position: fixed;
       top: 0;
       left: 0;
       z-index: 1;
       display: flex;
       align-items: center;
       justify-content: center;
     }
     .search-tab {
       display: flex;
       align-items: center;
       background-color: white;
       border-radius: 15px;
       padding: 5px 30px;
       cursor: pointer;
     }
     .search-tab input[type="file"] {
       display: none;
     }
     .search-tab label {
       display: flex;
       align-items: center;
       cursor: pointer;
     }
     .search-tab .magnifier-icon {
       margin-right: 10px;
       font-size: 16px;
       color: #2c3e50;
     }
     .control-panel {
       width: 400px;
       background-color: #2c3e50;
       color: white;
       padding: 20px;
       height: calc(100vh - 50px);
       position: fixed;
       left: 0;
       z-index: 1;
       margin-top: 50px;
     }
     .control-panel h1 {
       font-size: 1.2em;
       margin: 0;
       padding: 0;
       text-align: center;
       word-wrap: break-word;
     }
     .control-panel label, .control-panel span {
       font-size: 1em;
     }
     .main-content {
       margin-left: 420px;
       padding: 20px;
       width: calc(100% - 420px);
       margin-top: 50px;
     }
     .container-wrapper {
       display: flex;
       gap: 20px;
       height: 100vh;
     }
     .container {
       width: 50%;
       border: 1px solid #ccc;
       overflow-y: auto;
       position: relative;
     }
     .column {
       width: 50%;
       display: flex;
       flex-direction: column;
       gap: 20px;
     }
     .short-container {
       position: relative;
       width: 100%;
       height: calc(50% - 10px);
       border: 1px solid #ccc;
       overflow: auto;
       max-height: 100%;
       max-width: 100%;
     }
     .short-container::-webkit-scrollbar {
       width: 10px;
       height: 10px;
     }
     .short-container::-webkit-scrollbar-track {
       background: #f1f1f1;
     }
     .short-container::-webkit-scrollbar-thumb {
       background: #888;
       border-radius: 5px;
     }
     .short-container::-webkit-scrollbar-thumb:hover {
       background: #555;
     }
     .button {
       position: absolute;
       top: 10px;
       left: 10px;
       padding: 10px 20px;
       background-color: #34495e;
       color: white;
       border: none;
       border-radius: 5px;
       cursor: pointer;
     }
     .context-menu {
       position: fixed;
       background: white;
       border: 1px solid #ccc;
       padding: 5px 0;
       box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
       z-index: 1000;
       font-size: 12px;
     }
     .context-menu-item {
      padding: 4px 8px;
       cursor: pointer;
     }
     .context-menu-item:hover {
       background-color: #f0f0f0;
     }
     .legend-container {
       background-color: #34495e;
       padding: 10px;
       border-radius: 5px;
       margin-top: 20px;
       width: 100%;
       height: 200px;
       display: flex;
       flex-direction: row;
       gap: 10px;
       box-sizing: border-box;
     }

     .numerical-legend {
       flex: 1;
       background-color: rgba(255, 255, 255, 0.1);
       border-radius: 4px;
       padding: 10px;
       overflow-y: auto;
       max-width: calc(50% - 5px);
     }

     .categorical-legend {
       flex: 1;
       background-color: rgba(255, 255, 255, 0.1);
       border-radius: 4px;
       padding: 10px;
       overflow-y: auto;
       max-width: calc(50% - 5px);
     }

     h3 {
       font-size: 0.9em;
       margin: 0 0 10px 0;
       padding-bottom: 5px;
       border-bottom: 1px solid rgba(255, 255, 255, 0.2);
       position: sticky;
       top: 0;
       background-color: #34495e;
       z-index: 1;
     }

     ::-webkit-scrollbar {
       width: 8px;
     }

     ::-webkit-scrollbar-track {
       background: rgba(255, 255, 255, 0.1);
       border-radius: 4px;
     }

     ::-webkit-scrollbar-thumb {
       background: rgba(255, 255, 255, 0.3);
       border-radius: 4px;
     }

     ::-webkit-scrollbar-thumb:hover {
       background: rgba(255, 255, 255, 0.4);
     }

     .categorical-legend > div {
       margin-bottom: 10px;
       padding-bottom: 10px;
       border-bottom: 1px solid rgba(255, 255, 255, 0.1);
     }

     .categorical-legend > div:last-child {
       border-bottom: none;
     }

     .legend-container h2 {
       margin-top: 0;
       border-bottom: 1px solid rgba(255, 255, 255, 0.2);
       padding-bottom: 5px;
     }

     .numerical-legend, .categorical-legend {
       margin-top: 10px;
     }

     .categorical-legend > div {
       border-top: 1px solid rgba(255, 255, 255, 0.1);
       padding-top: 8px;
     }

     .categorical-legend > div:first-child {
       border-top: none;
       padding-top: 0;
     }
   </style>
 </head>
 <body>
   <div class="search-container">
     <div class="search-tab">
       <label>
         <span class="magnifier-icon">&#128269;</span>
         Upload CSV file
       </label>
       <input type="file" id="csvFileInput" accept=".csv">
     </div>
   </div>
   <div class="control-panel">
     <h1>CSV Visualizer</h1>
     <label for="rowClusters">Set Row Clusters:</label>
     <input type="range" id="rowClusters" name="rowClusters" min="1" max="10" value="5">
     <span id="rowClustersValue">5</span>
     <br>
     <label for="colClusters">Set Column Clusters:</label>
     <input type="range" id="colClusters" name="colClusters" min="1" max="10" value="5">
     <span id="colClustersValue">5</span>
   </div>
   <div class="main-content">
     <div class="container-wrapper">
       <div class="container">
         <button class="button" id="fullGridButton">Full Grid</button>
       </div>
       <div class="column">
         <div class="short-container">
           <button class="button" id="gridSummaryButton">Grid Summary</button>
         </div>
         <div class="short-container" id="newContainer">
         </div>
       </div>
     </div>
   </div>

   <script src="https://d3js.org/d3.v7.min.js"></script>
   <script src="../static/index.js"></script>
 </body>
</html>